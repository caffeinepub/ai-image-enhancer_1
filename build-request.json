{
  "kind": "build_request",
  "title": "Enhanced Photo Editing: Remove Blur, Upscale Resolution & Add Editing Tools",
  "projectName": "PixelBoost",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Remove any blur CSS/canvas filters currently applied to the enhanced image display in the ImageComparison component so that enhanced images are shown sharp and clean.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "Remove the blur part"
        ]
      },
      "acceptanceCriteria": [
        "No CSS blur filter or canvas blur is applied to the enhanced image output",
        "The enhanced image appears sharp and unprocessed in the comparison view"
      ]
    },
    {
      "id": "REQ-2",
      "text": "Implement canvas-based resolution upscaling simulation on the enhanced image. Use multi-step canvas upscaling (draw to a larger canvas in incremental steps) combined with an unsharp mask / convolution sharpening kernel to make the output image appear crisper and higher-resolution without any external API.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "increase its resolution",
          "Canvas-based resolution upscaling"
        ]
      },
      "acceptanceCriteria": [
        "Enhanced image is upscaled via canvas to at least 2x its original pixel dimensions",
        "Sharpening convolution kernel is applied post-upscale to reduce blurriness artifacts",
        "Resulting image looks visibly crisper than the raw upload"
      ]
    },
    {
      "id": "REQ-3",
      "text": "Add a brightness slider and a contrast slider to the enhanced image editing panel. These sliders should update the canvas-rendered enhanced image in real time using CSS filter or canvas pixel manipulation.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "Brightness & contrast sliders"
        ]
      },
      "acceptanceCriteria": [
        "Brightness slider ranges from -100 to +100 with 0 as default",
        "Contrast slider ranges from -100 to +100 with 0 as default",
        "Moving either slider immediately updates the displayed enhanced image"
      ]
    },
    {
      "id": "REQ-4",
      "text": "Add a saturation / color boost slider to the enhanced image editing panel. The slider should adjust color saturation in real time using canvas pixel manipulation or CSS filter.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "Saturation / color boost control"
        ]
      },
      "acceptanceCriteria": [
        "Saturation slider ranges from 0 (grayscale) to 200 (double saturation) with 100 as default",
        "Moving the slider immediately updates the displayed enhanced image"
      ]
    },
    {
      "id": "REQ-5",
      "text": "Add a sharpening filter control (e.g., a toggle or intensity slider) to the enhanced image editing panel. Apply a convolution sharpening kernel via canvas ImageData to increase perceived edge sharpness.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "Sharpening filter"
        ]
      },
      "acceptanceCriteria": [
        "User can toggle or adjust sharpening intensity",
        "At maximum sharpening, edges in the enhanced image are visibly more defined"
      ]
    },
    {
      "id": "REQ-6",
      "text": "Add a noise reduction effect toggle or slider to the enhanced image editing panel. Implement a simple box blur or median-style smoothing pass on the canvas pixel data to reduce visible noise/grain.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "Noise reduction effect"
        ]
      },
      "acceptanceCriteria": [
        "Noise reduction control is visible in the editing panel",
        "Enabling noise reduction visibly smooths grain in the enhanced image"
      ]
    },
    {
      "id": "REQ-7",
      "text": "Add crop and rotate tools to the enhanced image editing panel. Crop should allow the user to drag a selection rectangle over the image and confirm to crop. Rotate should provide 90-degree clockwise/counter-clockwise buttons and a free-rotation slider. All operations should be performed on the canvas.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "Crop & rotate tools"
        ]
      },
      "acceptanceCriteria": [
        "User can draw a crop region on the enhanced image and confirm to apply the crop",
        "90-degree clockwise and counter-clockwise rotation buttons are present and functional",
        "A free-rotation slider (e.g., -45 to +45 degrees) rotates the canvas-rendered image in real time",
        "Download button exports the final cropped/rotated/adjusted image"
      ]
    },
    {
      "id": "REQ-8",
      "text": "Consolidate all enhancement controls (upscaling, brightness, contrast, saturation, sharpening, noise reduction, crop, rotate) into a cohesive editing panel displayed below or alongside the enhanced image in the ImageComparison component. Include a 'Reset' button to restore all sliders and tools to their defaults.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "Add more features in enhanced photos"
        ]
      },
      "acceptanceCriteria": [
        "All editing controls are grouped in a single clearly labeled panel",
        "Reset button restores all controls to default values and re-renders the original enhanced image",
        "Panel is styled consistently with the existing PixelBoost amber/charcoal design theme"
      ]
    }
  ],
  "constraints": [
    "All image processing must be done entirely on the frontend using Canvas API and pixel manipulation â€” no external AI or upscaling API calls",
    "Do not modify files in frontend/src/hooks/useInternetIdentity.ts, frontend/src/hooks/useActor.ts, frontend/src/main.tsx, or frontend/src/components/ui",
    "Backend upload and storage logic must remain unchanged"
  ],
  "nonGoals": [
    "External AI upscaling API integration",
    "Backend changes to image storage or processing",
    "Real-time collaborative editing",
    "Video processing"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}